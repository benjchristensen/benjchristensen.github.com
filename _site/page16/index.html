<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en-us">

  <head>
  <link href="http://gmpg.org/xfn/11" rel="profile">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta http-equiv="content-type" content="text/html; charset=utf-8">

  <!-- Enable responsiveness on mobile devices-->
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

  <title>
    
      Ben Christensen &middot; 
    
  </title>

  <!-- CSS -->
  <link rel="stylesheet" href="/public/css/poole.css">
  <link rel="stylesheet" href="/public/css/syntax.css">
  <link rel="stylesheet" href="/public/css/hyde.css">
  <link rel="stylesheet" href="http://fonts.googleapis.com/css?family=PT+Sans:400,400italic,700|Abril+Fatface">

  <!-- Icons -->
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/public/apple-touch-icon-144-precomposed.png">
                                 <link rel="shortcut icon" href="/public/favicon.ico">

  <!-- RSS -->
  <link rel="alternate" type="application/rss+xml" title="RSS" href="/atom.xml">
</head>


  <body class=" layout-reverse">

    <div class="sidebar">
  <div class="container sidebar-sticky">
    <div class="sidebar-about">
      <h1>
          Ben Christensen
      </h1>
      <p class="lead">Software Engineer at Netflix, previously Apple</p>
    </div>

    <nav class="sidebar-nav">
      <a class="sidebar-nav-item" href="/">Home</a>

      

      
      
        
          
        
      
        
          
            <a class="sidebar-nav-item" href="/about/">About</a>
          
        
      
        
      
        
          
        
      
        
          
            <a class="sidebar-nav-item" href="/toc/">Posts</a>
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      

      <a class="sidebar-nav-item" href="http://twitter.com/benjchristensen">Twitter</a>
      <a class="sidebar-nav-item" href="http://github.com/benjchristensen">Github</a>
      <a class="sidebar-nav-item" href="http://github.com/ReactiveX/RxJava">&bull; RxJava</a>
      <a class="sidebar-nav-item" href="http://github.com/Netflix/Hystrix">&bull; Hystrix</a>
      <a class="sidebar-nav-item" href="http://linkedin.com/in/benjchristensen">LinkedIn</a>
    </nav>


    <p>&copy; 2015. All rights reserved.</p>
  </div>
</div>


    <div class="content container">
      <div class="posts">
  
  <div class="post">
    <h1 class="post-title">
      <a href="/code/2008/02/06/how-to-strip-invalid-xml-characters/">
        How to strip invalid XML characters
      </a>
    </h1>

    <span class="post-date">06 Feb 2008</span>

    <p>http://cse-mjmcl.cse.bris.ac.uk/blog/2007/02/14/1171465494443.html   </p>

<p>  /**</p>

<p>     * This method ensures that the output String has only</p>

<p>     * valid XML unicode characters as specified by the</p>

<p>     * XML 1.0 standard. For reference, please see</p>

<p>     * <a href="http://www.w3.org/TR/2000/REC-xml-20001006#NT-Char">the</p>

<p>     * standard</a>. This method will return an empty</p>

<p>     * String if the input is null or empty.</p>

<p>     *</p>

<p>     * @param in The String whose non-valid characters we want to remove.</p>

<p>     * @return The in String, stripped of non-valid characters.</p>

<p>     */</p>

<p>    public String stripNonValidXMLCharacters(String in) {</p>

<p>        StringBuffer out = new StringBuffer(); // Used to hold the output.</p>

<p>        char current; // Used to reference the current character.</p>

<p>        if (in == null || (&quot;&quot;.equals(in))) return &quot;&quot;; // vacancy test.</p>

<p>        for (int i = 0; i &lt; in.length(); i++) {</p>

<p>            current = in.charAt(i); // NOTE: No IndexOutOfBoundsException caught here; it should not happen.</p>

<p>            if ((current == 0x9) ||</p>

<p>                (current == 0xA) ||</p>

<p>                (current == 0xD) ||</p>

<p>                ((current &gt;= 0x20) &amp;&amp; (current &lt;= 0xD7FF)) ||</p>

<p>                ((current &gt;= 0xE000) &amp;&amp; (current &lt;= 0xFFFD)) ||</p>

<p>                ((current &gt;= 0x10000) &amp;&amp; (current &lt;= 0x10FFFF)))</p>

<p>                out.append(current);</p>

<p>        }</p>

<p>        return out.toString();</p>

<p>    }     </p>

  </div>
  
  <div class="post">
    <h1 class="post-title">
      <a href="/fun/production/2007/10/23/quotes-which-made-my-week/">
        Quotes Which Made My Week
      </a>
    </h1>

    <span class="post-date">23 Oct 2007</span>

    <p>&quot;We accidentally shot ourselves in the foot.
Then, when looking down the barrel of the gun to see where the bullet came from, we shot ourselves in the eye.
Then we let go of the gun, which dropped on (and broke) our good foot….&quot;</p>

<p>&quot;There&#39;s no plan to upgrade systems except by forklift.&quot;</p>

<p>&quot;We&#39;re running a website written with hammers and chisels on stone in an environment where gerbils are running on wheels in cages.&quot;</p>

  </div>
  
  <div class="post">
    <h1 class="post-title">
      <a href="/architecture/code/production/2007/10/19/websphere-multi-jvm-jsessionid/">
        Websphere Multi-JVM jsessionid
      </a>
    </h1>

    <span class="post-date">19 Oct 2007</span>

    <p>Works just like it should :-)</p>

<p><a href="http://www-1.ibm.com/support/docview.wss?rs=180&amp;context=SSEQTP&amp;dc=DB520&amp;uid=swg21210881&amp;loc=en_US&amp;cs=UTF-8&amp;lang=en&amp;rss=ct180websphere">IBM Support Link</a></p>

<p>Two JVMs with different contexts but the same domain now use the same jsessionid so they can talk back and forth in the same browser without jsessionid schizophrenia.</p>

  </div>
  
  <div class="post">
    <h1 class="post-title">
      <a href="/management%20&amp;%20leadership/production/2007/10/13/lessons-learned/">
        Lessons Learned
      </a>
    </h1>

    <span class="post-date">13 Oct 2007</span>

    <p>[1] Don&#39;t be accommodating to a client ... otherwise, when all hell breaks loose none of that will matter and any issues resulting from attempts to accommodate last minute changes, bad decisions and architecture/environmental issues will all be the fault of the development team -- instead of the client.</p>

<p>[2] If one wants to be accommodating, then everything must be done so with disclaimers in writing to significantly high enough ranking people -- Director or VP -- managers don&#39;t cut it.</p>

<p>[3] Dictate every single aspect of an environments requirements and thresholds, even if it&#39;s not directly related to the application and even (especially?!) if it&#39;s thought to be assumed.</p>

<p>For example:</p>

<ul>
<li><p>firewall behavior</p></li>
<li><p>load balancer logic</p></li>
<li><p>request throttling</p></li>
<li><p>JVM configuration</p></li>
<li><p>appserver configuration</p></li>
<li><p>relationship of application to other apps in environment</p></li>
<li><p>how many applications are running within a JVM or on a box</p></li>
<li><p>thread pools and configuration (throttling, min/max, growth)</p></li>
<li><p>db pool config</p></li>
<li><p>database server config (memory, available connections to all applications, not just the one being deployed)</p></li>
<li><p>network latency and error thresholds</p></li>
<li><p>environment capacity</p></li>
<li><p>disclaimers on environmental issues which will affect application</p></li>
</ul>

<p>[4] Since virtually nobody has an actual replica of production, dictate that an environment must be made available that everyone agrees on as being the &#39;spec&#39; to which the app will be built and signed off on. The client must then accept that since their prod environment does not match that spec, any risk of issues going into prod are theirs -- such as bugs, crashes, delays, etc.</p>

<p>[5] If a client does not have adequate testing tools or refuses to provide opportunities for load testing (internal tools, Gomez, Keynote etc) then an official disclaimer must be communicated to the client (see above).</p>

<p>[6] Always get a baseline of a production environment before deployment:</p>

<ul>
<li><p>thread dumps</p></li>
<li><p>application performance numbers</p></li>
<li><p>network errors/latency/performance</p></li>
<li><p>application logs</p></li>
</ul>

<p>[7] Do not assume that because code has worked in other environments that it will work in your clients.</p>

<p>[8] The client doesn&#39;t care if it works anywhere else besides their prod environment -- even if it works in the dev environment they provided. See [4] above.</p>

  </div>
  
  <div class="post">
    <h1 class="post-title">
      <a href="/personal/2007/08/28/i-hate-word/">
        I hate Word.
      </a>
    </h1>

    <span class="post-date">28 Aug 2007</span>

    <p>I hate Microsoft Word tonight.</p>

<p>I put columns in my document, so it creates a new &quot;section&quot; around each one.</p>

<p>That then means that page numbering is all screwed up -- and even though I tell it to continue page numbering from the previous section it still doesn&#39;t do so -- so I either can&#39;t have page numbering correct in my TOC and footers, or I can&#39;t use columns.</p>

<p>I HATE WORD.</p>

<p>Wordperfect had this all working properly like 15 years ago in version 5.1 ... and it let me actually see the stupid codes instead of hiding it all behind a useless GUI.</p>

  </div>
  
</div>

<div class="pagination">
  
    <a class="pagination-item older" href="/page17">Older</a>
  
  
    
      <a class="pagination-item newer" href="/page15">Newer</a>
    
  
</div>
    </div>

  </body>
</html>
